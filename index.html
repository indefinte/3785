<!doctype html>
<!--[if lt IE 7]> <html class="ie6 oldie"> <![endif]-->
<!--[if IE 7]>    <html class="ie7 oldie"> <![endif]-->
<!--[if IE 8]>    <html class="ie8 oldie"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="">
<!--<![endif]-->
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>揪夥要知道</title>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
<!-- Latest compiled and minified JavaScript -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<!-- WebSQL -->
<script src="http://wp.3785tv.com/wp-content/themes/customizr/inc/assets/js/webdb.jquery.js"></script>
<!-- PhoneGap -->
<script type="text/javascript" src="phonegap.js"></script>
<style>
th { text-align: center; }
td { text-align: left; padding-left: 20px; }
h2 { position: absolute; right: 20px; bottom: 0px; color: #333; font-size: 20px; font-weight: bold; text-shadow:3px 3px 3px #999999; }
h3.tms { position: absolute; right: 10px; top: 0px; color: rgb(29, 102, 102); font-size: 8px; text-shadow:2px 2px 2px #999999; margin: 5px 10px 0 0; }
.profile { position: absolute; left: 10px; }
.ht { display: block; position: fixed; top: 0; left: 0; width: 100%; height: 100px; background-color: rgb(255,251,138); -webkit-box-shadow: 0px 10px 5px 0px rgba(0,0,0,0.2); -moz-box-shadow: 0px 10px 5px 0px rgba(0,0,0,0.2); box-shadow: 0px 10px 5px 0px rgba(0,0,0,0.2); }
.tp { position: fixed; left: 0; top: 0; right: 0; bottom: 71px; }
.bd { display: block; position: fixed; left: 0; right: 0; bottom: 0; height: 71px; background-color: rgb(24,88,160); z-index: 999; text-align: center; }
.clb { clear: both; }
.jfc { background-color: #660000; color: #fff; margin: 0 10px 20px 10px; padding: 10px; }
.rad { -webkit-border-radius: 15px; -webkit-border-top-right-radius: 0; -moz-border-radius: 15px; -moz-border-radius-topright: 0; border-radius: 15px; border-top-right-radius: 0; -webkit-box-shadow: 5px 5px 5px 0px rgba(0,0,0,0.2); -moz-box-shadow: 5px 5px 5px 0px rgba(0,0,0,0.2); box-shadow: 5px 5px 5px 0px rgba(0,0,0,0.2); }
.btnqci { width: 87px; height: 98px; margin: -27px auto 0 auto; }

.btn {
	-moz-box-shadow:inset 0px 1px 0px 0px #f9eca0;
	-webkit-box-shadow:inset 0px 1px 0px 0px #f9eca0;
	box-shadow:inset 0px 1px 0px 0px #f9eca0;
	background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #f0c911), color-stop(1, #f2ab1e) );
	background:-moz-linear-gradient( center top, #f0c911 5%, #f2ab1e 100% );
	filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f0c911', endColorstr='#f2ab1e');
	background-color:#f0c911;
	-webkit-border-top-left-radius:20px;
	-moz-border-radius-topleft:20px;
	border-top-left-radius:20px;
	-webkit-border-top-right-radius:20px;
	-moz-border-radius-topright:20px;
	border-top-right-radius:20px;
	-webkit-border-bottom-right-radius:20px;
	-moz-border-radius-bottomright:20px;
	border-bottom-right-radius:20px;
	-webkit-border-bottom-left-radius:20px;
	-moz-border-radius-bottomleft:20px;
	border-bottom-left-radius:20px;
	text-indent:0;
	border:1px solid #e65f44;
	display:inline-block;
	color:#c92200;
	font-family:Arial;
	font-size:12px;
	font-weight:bold;
	font-style:normal;
	height:45px;
	line-height:45px;
	width:180px;
	text-decoration:none;
	text-align:center;
	text-shadow:1px 1px 0px #ded17c;
	margin: 2px 5px;
	float: left;
}
.btn:hover {
	background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #f2ab1e), color-stop(1, #f0c911) );
	background:-moz-linear-gradient( center top, #f2ab1e 5%, #f0c911 100% );
	filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f2ab1e', endColorstr='#f0c911');
	background-color:#f2ab1e;
}
.btn:active {
	position:relative;
	top:1px;
}

</style>
<script>
//window.location = 'http://wp.3785tv.com';

// alert
(function(){$.simplyToast=function(e,t,n){function u(){$.simplyToast.remove(o)}n=$.extend(true,{},$.simplyToast.defaultOptions,n);var r='<div class="simply-toast alert alert-'+(t?t:n.type)+" "+(n.customClass?n.customClass:"")+'">';if(n.allowDismiss)r+='<span class="close" data-dismiss="alert">&times;</span>';r+=e;r+="</div>";var i=n.offset.amount;$(".simply-toast").each(function(){return i=Math.max(i,parseInt($(this).css(n.offset.from))+this.offsetHeight+n.spacing)});var s={position:n.appendTo==="body"?"fixed":"absolute",margin:0,"z-index":"9999",display:"none","min-width":n.minWidth,"max-width":n.maxWidth};s[n.offset.from]=i+"px";var o=$(r).css(s).appendTo(n.appendTo);switch(n.align){case"center":o.css({left:"50%","margin-left":"-"+o.outerWidth()/2+"px"});break;case"left":o.css("left","20px");break;default:o.css("right","20px")}if(o.fadeIn)o.fadeIn();else o.css({display:"block",opacity:1});if(n.delay>0){setTimeout(u,n.delay)}o.find('[data-dismiss="alert"]').removeAttr("data-dismiss").click(u);return o};$.simplyToast.remove=function(e){if(e.fadeOut){return e.fadeOut(function(){return e.remove()})}else{return e.remove()}};$.simplyToast.defaultOptions={appendTo:"body",customClass:false,type:"info",offset:{from:"top",amount:20},align:"right",minWidth:250,maxWidth:450,delay:4e3,allowDismiss:true,spacing:10}})();
// loading
!function(a,b,c){var d=function(b,c){this.element=b,this.settings=a.extend({},d.defaults,c),this.settings.fullPage=this.element.is("body"),this.init(),this.settings.start&&this.start()};d.defaults={overlay:c,message:"Loading...",theme:"light",stoppable:!1,start:!0,onStart:function(a){a.overlay.fadeIn(150)},onStop:function(a){a.overlay.fadeOut(150)},onClick:function(){}},d.setDefaults=function(b){d.defaults=a.extend({},d.defaults,b)},a.extend(d.prototype,{init:function(){this.isActive=!1,this.overlay=this.settings.overlay||this.createOverlay(),this.resize(),this.attachMethodsToExternalEvents(),this.attachOptionsHandlers()},createOverlay:function(){var b=a('<div class="loading-overlay loading-theme-'+this.settings.theme+'"><div class="loading-overlay-content">'+this.settings.message+"</div></div>").hide().appendTo("body"),c=this.element.attr("id");return c&&b.attr("id",c+"_loading-overlay"),b},attachMethodsToExternalEvents:function(){var c=this;c.settings.stoppable&&c.overlay.on("click",function(){c.stop()}),c.overlay.on("click",function(){c.element.trigger("loading.click",c)}),a(b).on("resize",function(){c.resize()}),a(document).on("ready",function(){c.resize()})},attachOptionsHandlers:function(){var a=this;a.element.on("loading.start",function(b,c){a.settings.onStart(c)}),a.element.on("loading.stop",function(b,c){a.settings.onStop(c)}),a.element.on("loading.click",function(b,c){a.settings.onClick(c)})},resize:function(){var a=this,b=a.element,c=b.outerWidth(),d=b.outerHeight();this.settings.fullPage&&(d="100%",c="100%"),this.overlay.css({position:a.settings.fullPage?"fixed":"absolute",zIndex:9+a.settings.fullPage,top:b.offset().top,left:b.offset().left,width:c,height:d})},start:function(){this.isActive=!0,this.element.trigger("loading.start",this)},stop:function(){this.isActive=!1,this.element.trigger("loading.stop",this)},active:function(){return this.isActive},toggle:function(){this.active()?this.stop():this.start()}});var e="jquery-loading";a.fn.loading=function(b){var c=arguments.length>1?Array.prototype.slice.call(arguments,1):[];return this.each(function(){var f=a.data(this,e);f?"string"==typeof b?f[b].apply(f,c):f.start():a.data(this,e,f=new d(a(this),b))})},a.fn.Loading=function(){return a(this).data(e)},a.expr[":"].loading=function(b){var c=a.data(b,e);return c?c.active():!1},a.Loading=d}(jQuery,window);
// object size
Object.size = function(obj) { var size = 0, key; for (key in obj) { if (obj.hasOwnProperty(key)){ size++; } } return size; };

//init
window.DB = {};
window.CONN = {};

//document ready
$(document).ready(function() {
	window.DB = $.webdb();
	window.CONN = window.DB.connect({
		shortName : 'SC',
		version : '1.0',
		displayName : 'Shang Ching',
		maxSize : (100 * 1024 * 1024)
	});
	 
	window.CONN.run({
		query: 'CREATE TABLE IF NOT EXISTS user (uid varchar(255) NOT NULL, uname varchar(255) NOT NULL, udata MEDIUMTEXT NOT NULL)',
		values: null,
		onSuccess:function(tx, r) {
			console.log('User Table Create Success');
			
			var uid = '1234567';
			var uname = 'ShangChing';
			var udata = '尚青雲端整合行銷';
			window.CONN.run({
				query: 'INSERT INTO img (uid, uname, udata) VALUES ( ?, ?, ?)',
				values: [uid, uname, udata],
				onSuccess:function(tx, r) {
					console.log('setWebSql Success');
				},
				onError:function(tx,err) {
					console.log('setWebSql Error - ' + err);
				}
			});
			
		},
		onError:function(tx,err) {
			console.log('User Table Create Error - ' + err);
		}
	});

	$('body').on('click','.btnqci',function(){
		try{
			cordova.plugins.barcodeScanner.encode(cordova.plugins.barcodeScanner.Encode.TEXT_TYPE, 'http://wp.3785tv.com', function(success) {
					alert("encode success: " + success);
				}, function(fail) {
					alert("encoding failed: " + fail);
				}
			);
		}catch(e){
			alert(e);
		}	
	});
	/*
	$('body').on('click','.btn1',function(){
		navigator.geolocation.getCurrentPosition(function(position) {
			alert('Latitude: '          + position.coords.latitude          + '\n' +
				  'Longitude: '         + position.coords.longitude         + '\n' +
				  'Altitude: '          + position.coords.altitude          + '\n' +
				  'Accuracy: '          + position.coords.accuracy          + '\n' +
				  'Altitude Accuracy: ' + position.coords.altitudeAccuracy  + '\n' +
				  'Heading: '           + position.coords.heading           + '\n' +
				  'Speed: '             + position.coords.speed             + '\n' +
				  'Timestamp: '         + position.timestamp                + '\n');
		},function(error){
			alert('code: '    + error.code    + '\n' +
				  'message: ' + error.message + '\n');
		});	  	  
	});
	$('body').on('click','.btn2',function(){
		try{			
			//var s= ''; $.each(window,function(k,v){ s+=k+'\n'; }); alert(s);
			cordova.plugins.barcodeScanner.scan(function(result){
				  alert('Got a barcode\n' +
						'Result: ' + result.text + '\n' +
						'Format: ' + result.format + '\n' +
						'Cancelled: ' + result.cancelled);
				},function (error) {
				  alert("Scanning failed: " + error);
			});
		}catch(e){
			alert(e);
		}		
	});
	*/
	
});	

//device ready
document.addEventListener('deviceready', function(){
	//alert('navigator.geolocation works well');	
	
	document.addEventListener('menubutton', function(){
		//alert('Menu button pressed.');
		try{
			cordova.plugins.barcodeScanner.scan(
				function (result) {
					if(result.cancelled=='true'||result.cancelled==true){
					}else{
						alert("Got a barcode\n" +
						"Result: " + result.text + "\n" +
						"Format: " + result.format + "\n" +
						"Cancelled: " + result.cancelled);
					}
				}, 
				function (error) {
					alert("Scanning failed: " + error);
				}
			);
		}catch(e){
			alert(e);
		}
		//alert('Menu button pressed.');
	}, true);
}, false);

</script>
</head>
<body>

<div class="tp">
	<iframe src="http://wp.3785tv.com" marginheight="0" marginwidth="0" frameborder="0" scrolling="yes" style="display: block; width: 100%; height: 100%;" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>
</div>
<div class="bd">		
	<!-- 
	<a href="#" class="btn btn1">座標測試</a>
	<a href="#" class="btn btn2">QR Code 掃描測試</a>
	<a href="#" class="btn btn3">QR Code 生成測試</a>			
	-->
	<a href="#"><img src="images/barcode.png" class="btnqci"></a>
</div>

</body>
</html>

